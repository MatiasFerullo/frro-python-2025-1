<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Cartera de Acciones</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="{{ url_for('static', filename='css/output.css') }}"
    />
    <script src="{{ url_for('static', filename='js/chart.js') }}"></script>
    <script>
      function initChart() {
        const stockChart = document
          .getElementById("stockChart")
          .getContext("2d");

        let chart1 = new Chart(stockChart, {
          type: "line",
          data: {
            // prettier-ignore
            labels: ["10/8", "11/8", "12/8", "13/8", "14/8", "15/8", "16/8", "17/8", "18/8", "19/8", "20/8"],
            datasets: [
              {
                data: [120, 118, 121, 123, 125, 127, 130, 128, 132, 135, 100],
                borderColor: "oklch(37.2% 0.044 257.287)",
                backgroundColor: "oklch(55.4% 0.046 257.417 / 50%)",
                fill: true,
                pointRadius: 0,
                pointHoverRadius: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
              tooltip: { enabled: false },
            },
            scales: {
              x: {
                title: { display: false },
                grid: { display: false },
              },
              y: {
                title: { display: false },
                grid: { display: false },
              },
            },
          },
        });
        const compositionChart = document
          .getElementById("compositionChart")
          .getContext("2d");
        const chart2 = new Chart(compositionChart, {
          type: "doughnut",
          data: {
            labels: ["AAPL", "GOOGL"],
            datasets: [
              {
                data: [200, 450],
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: "none",
              },
              tooltip: {
                enabled: true,
              },
            },
          },
        });
      }

      if (document.startViewTransition) {
        document
          .startViewTransition(() => {})
          .finished.then(() => {
            initChart();
          });
      } else {
        document.addEventListener("DOMContentLoaded", initChart);
      }
    </script>
    <script src="{{ url_for('static', filename='js/htmx.min.js') }}"></script>
    <style>
      @view-transition {
        navigation: auto; /**/
      }
      /* prettier-ignore */
      ::view-transition-group(alerts-bar) { z-index: 2; }
      /* prettier-ignore */
      ::view-transition-group(alerts-title) { z-index: 2; }
      /* prettier-ignore */
      ::view-transition-group(alerts-content) { z-index: 2; }
      /* prettier-ignore */
      ::view-transition-group(portfolio-bar) { z-index: 2; }
      /* prettier-ignore */
      ::view-transition-group(portfolio-title) { z-index: 2; }
      /* prettier-ignore */
      ::view-transition-group(portfolio-content) { z-index: 2; }
    </style>
  </head>
  <body class="overflow-x-hidden bg-[#fbfbfb] select-none">
    <div class="flex justify-center border-b-1 border-slate-200 bg-white">
      <div
        class="flex w-full max-w-4xl flex-row items-center justify-between p-4"
      >
        <div>
          <a
            href="/"
            class="flex cursor-pointer rounded-sm p-1 font-semibold transition hover:bg-gray-200 active:scale-90 active:bg-gray-200"
            >Cartera de Acciones</a
          >
        </div>
        <div>
          <form action="/auth/logout" method="POST">
            <button
              type="submit"
              class="flex cursor-pointer rounded-sm p-1 transition hover:bg-gray-200 active:scale-90 active:bg-gray-200"
            >
              Cerrar sesión
            </button>
          </form>
        </div>
      </div>
    </div>
    <div
      class="flex w-full justify-center border-b-1 border-slate-200 bg-white"
    >
      <div
        class="flex w-full max-w-4xl flex-col items-start gap-2 p-4 sm:flex-row sm:items-center lg:p-6"
      >
        <div
          hx-get="/get-portfolio-summary"
          hx-trigger="load"
          hx-swap="innerHTML"
        >
          <div
            class="flex flex-col gap-1 rounded-sm bg-gray-200 animate-pulse"
            id="summary-loading"
          >
            <div class="flex flex-row items-end gap-1">
              <h1 class="text-3xl font-semibold text-transparent">$0.000,0</h1>
              <span class="text-2xl text-transparent">ARS</span>
            </div>
            <div class="flex gap-2">
              <div class="flex flex-row gap-1">
                <p class="font-semibold text-transparent">+$00,0</p>
                <p class="text-transparent">ARS</p>
              </div>
              <div class="flex flex-row items-center gap-1 px-2">
                <p class="font-semibold text-transparent">0,0%</p>
              </div>
            </div>
          </div>
        </div>
        <a
          class="flex h-40 w-full min-w-0 cursor-pointer rounded-sm bg-white transition hover:bg-gray-200 active:scale-90 active:bg-gray-200 sm:flex-1"
          style="view-transition-name: chart"
          href="/chart"
        >
          <canvas id="stockChart"></canvas>
        </a>
      </div>
    </div>
    <div class="flex min-h-screen w-full flex-col items-center">
      <div
        class="w-full flex-1 items-center border-slate-200 bg-white lg:max-w-4xl lg:border-x-1"
      >
        <div
          class="flex items-center justify-between bg-white p-4 lg:px-6 lg:pt-6"
          style="view-transition-name: alerts-bar"
        >
          <h2
            class="text-xl leading-none sm:text-2xl"
            style="view-transition-name: alerts-title"
          >
            Alertas
          </h2>
          <a
            class="flex cursor-pointer rounded-sm bg-slate-600 p-1 text-white transition active:scale-90"
            href="/alerts"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path
                d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"
              />
              <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
            </svg>
          </a>
        </div>
        <div style="view-transition-name: alerts-content"></div>
        <div class="px-4 lg:px-6">
          <p
            class="rounded-sm bg-gray-200 p-4 text-center text-gray-600 lg:p-6"
          >
            No hay alertas que mostrar
          </p>
        </div>
        <div
          class="flex items-center justify-between bg-white p-4 lg:px-6 lg:pt-6"
          style="view-transition-name: portfolio-bar"
        >
          <h2
            class="text-xl leading-none sm:text-2xl"
            style="view-transition-name: portfolio-title"
          >
            Portafolio
          </h2>
          <a
            class="flex cursor-pointer rounded-sm bg-slate-600 p-1 text-white transition active:scale-90"
            href="/portfolio"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path
                d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"
              />
              <path d="M13.5 6.5l4 4" />
            </svg>
          </a>
        </div>
        <div style="view-transition-name: portfolio-content"></div>
        <div class="px-4 lg:px-6">
          <div
            class="divide-y divide-gray-200"
            hx-get="/get-user-stocks?view=menu"
            hx-trigger="load"
            hx-swap="innerHTML"
            id="stock-list"
          >
            <div>
              <button
                class="flex w-full rounded-sm p-1 animate-pulse bg-gray-200 text-transparent"
              >
                <div class="flex w-full flex-row justify-between">
                  <div class="flex flex-col items-start">
                    <h3 class="font-semibold">NONE</h3>
                    <p>NONE</p>
                  </div>
                  <div class="flex flex-col items-end">
                    <h3 class="font-semibold">NONE</h3>
                    <div
                      class="flex flex-row items-center gap-1 rounded-full px-2"
                    >
                      <p class="font-semibold">NONE</p>
                    </div>
                  </div>
                </div>
              </button>
            </div>
          </div>
        </div>
        <div
          class="flex items-center justify-between bg-white p-4 lg:px-6 lg:pt-6"
        >
          <h2 class="text-xl leading-none sm:text-2xl">Composición</h2>
        </div>
        <div class="px-4 lg:px-6">
          <div class="flex h-70 justify-center">
            <canvas id="compositionChart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
