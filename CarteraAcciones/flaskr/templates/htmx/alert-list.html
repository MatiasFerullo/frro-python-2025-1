{% if alertas %}
    {% for alerta in alertas %}
        <div>
            <div
                class="flex w-full p-1"
                data-anim-name="edit-alert-form-bar-{{ alerta.id }}"
            >
                <div class="flex w-full flex-row justify-between">
                <div class="flex w-full flex-col items-start">
                    {% if alerta.alertas_precio %}
                        <h3
                            class="font-semibold"
                        >
                            Precio {{ "Mínimo" if alerta.alertas_precio[0].tipo == "min" else "Máximo" }}
                        </h3>
                        <div class="flex flex-row items-center gap-1 text-gray-400">
                            <p>{{alerta.alertas_precio[0].accion.simbolo}} - ${{alerta.alertas_precio[0].precio | format_price}}</p>
                        </div>
                    {% elif alerta.alertas_portafolio %}
                        <h3
                            class="font-semibold"
                        >
                            Cambio Súbito
                        </h3>
                        <div class="flex flex-row items-center gap-1 text-gray-400">
                            <p>Portafolio - {{alerta.alertas_portafolio[0].variacion | format_price}}</p>
                        </div>
                    {% elif alerta.alertas_rendimiento %}
                        <h3
                            class="font-semibold"
                        >
                            {{"Ganancia" if alerta.alertas_rendimiento[0].disparador == "gain" else "Pérdida"}}
                        </h3>
                        <div class="flex flex-row items-center gap-1 text-gray-400">
                            {% if alerta.alertas_rendimiento[0].is_portafolio %}
                                <p>Portafolio</p>
                            {% else %}
                                <p>{{alerta.alertas_rendimiento[0].usuario_accion.accion.simbolo}}</p>
                                <p class="text-xs">({{alerta.alertas_rendimiento[0].usuario_accion.fecha_hora.strftime('%d/%m/%Y')}})</p>
                            {% endif %}
                            <p>-</p>
                            <p>{{alerta.alertas_rendimiento[0].porcentaje}}%</p>
                        </div>
                    {% endif %}
                </div>
                <div class="flex flex-row items-center gap-2">
                    <button
                    class="flex cursor-pointer rounded-sm bg-slate-600 p-1 text-white transition active:scale-90"
                    {% if alerta.alertas_precio %}
                        onclick="openEditPopup('1', {
                            alerta_id: '{{alerta.alertas_precio[0].alerta_id}}',
                            elemento: '{{alerta.alertas_precio[0].accion.nombre}}',
                            tipo: '{{alerta.alertas_precio[0].tipo}}',
                            precio: '{{alerta.alertas_precio[0].precio}}'
                        })"
                    {% elif alerta.alertas_rendimiento %}
                        onclick="openEditPopup('2', {
                            alerta_id: '{{alerta.alertas_rendimiento[0].alerta_id}}',
                            elemento: '{% if alerta.alertas_rendimiento[0].is_portafolio %}Portafolio{% else %}{{alerta.alertas_rendimiento[0].usuario_accion.accion.nombre}} ({{alerta.alertas_rendimiento[0].usuario_accion.fecha_hora.strftime('%d/%m/%Y')}}){% endif %}',
                            disparador: '{{alerta.alertas_rendimiento[0].disparador}}',
                            porcentaje: '{{alerta.alertas_rendimiento[0].porcentaje}}'
                        })"
                    {% elif alerta.alertas_portafolio %}
                        onclick="openEditPopup('3', {
                            alerta_id: '{{alerta.alertas_portafolio[0].alerta_id}}',
                            variacion: '{{alerta.alertas_portafolio[0].variacion}}'
                        })"
                    {% endif %}
                    >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path
                        d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"
                        />
                        <path d="M13.5 6.5l4 4" />
                    </svg></button
                    ><button
                    class="flex cursor-pointer rounded-sm bg-[#eb3837] p-1 text-white transition active:scale-90"
                    hx-delete="/delete-alert/{{ alerta.id }}"
                    hx-target="#alert-list"
                    hx-swap="innerHTML"
                    >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M4 7l16 0" />
                        <path d="M10 11l0 6" />
                        <path d="M14 11l0 6" />
                        <path
                        d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"
                        />
                        <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                    </svg>
                    </button>
                </div>
                </div>
            </div>
            <div data-anim-name="edit-alert-form-content-{{ alerta.id }}"></div>
        </div>
    {% endfor %}
{% else %}
    <p class="rounded-sm bg-gray-200 p-4 text-center text-gray-600 lg:p-6">
    No hay alertas que mostrar
    </p>
{% endif %}
